<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8>
        <title>Veenda Client</title>
        <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>

       <!-- titulo -->
    <script type="text/x-handlebars">
        <div class="page-header">
            <div class="container" >
              <a {{ action 'back'}} >
                <img src="veenda_logo_2.png">           
              
             </a>
            </div>
        </div>
        {{outlet}} 
    </script>

    
    <script type="text/x-handlebars" data-template-name="dispatched_orders/dispatched_order">

        {{#if destination_latitude }}

            <div class="container text-center">
                {{#if delivered}}
                    <div class="details">
                        <div class="panel panel-default text-left">
                          <!-- Table -->
                          <table class="table">
                            <tr class="active">
                              <th>Producto</th>
                              <th>{{this.name}}</th>
                            </tr>
                            <tr>
                              <td>Estado</td>
                              <td>Recibido</td>
                            </tr>
                          </table>
                        </div>

                    {{#if comment}}
                      <h3 class="margin-30-0">Ranking</h3>
                      {{rating_helper this}}

                          <div class="panel panel-info">
                            <div class="panel-heading">
                              <h3 class="panel-title">Comentarios</h3>
                            </div>
                            <div class="panel-body">
                              {{comment}}
                            </div>
                          </div>
                    {{/if}}
                    <button class="btn btn-default" {{ action "back"}}>Volver</button>
					<button class="btn btn-danger" {{ action "reset"}}>Despacho No Recibido</button>
                </div>

                {{else}}

                    {{#if isMap}}
                        <div class="btn-group btn-group-lg-50 margin-15">
                            <button type="button" {{ action "mapFalse"}} class="btn btn-default btn-lg-50"><span class="glyphicon glyphicon-list"></span> Detalles</button>
                            <button type="button" {{ action "mapTrue"}} class="btn btn-primary btn-lg-50"><span class="glyphicon glyphicon-screenshot"></span> Mapa</button>
                        </div>
                        <div class="details">
                            {{#view App.MapView }}<br/>{{/view}}
                            <table class="table table-bordered table-margin-3">
                              <tr>
                                <td><img src="gps-icon-spec.png"> Destinatario</td>
                                <td><img src="gps-icon-dispatcher-spec.png"> Zona despachador</td>
                              </tr>
                            </table>
                        </div>
                    {{else}}
                        <div class="btn-group btn-group-lg-50 margin-15">
                            <button type="button" {{ action "mapFalse"}} class="btn btn-primary btn-lg-50"><span class="glyphicon glyphicon-list"></span> Detalles</button>
                            <button type="button" {{ action "mapTrue"}} class="btn btn-default btn-lg-50"><span class="glyphicon glyphicon-screenshot"></span> Mapa</button>
                        </div>
                        <div class="details">

                            <div class="panel panel-default text-left">
                              <!-- Table -->
                              <table class="table">
                                <tr class="active">
                                  <th>Producto</th>
                                  <th>{{this.name}}</th>
                                </tr>
                                <tr>
                                  <td>Estado</td>
                                  <td>Traslado</td>
                                </tr>
                                <tr>
                                  <td>Pedidos restantes</td>
                                  <td>{{ rest }}</td>
                                </tr>
                                <tr>
                                  <td>Distancia a destino aproximada</td>
                                  <td>{{ distance }} km</td>
                                </tr>
                              </table>
                            </div>

                            <button class="btn btn-success btn-lg-300" {{ action "insert"}} >Despacho Recibido</button>
                        </div>
                    {{/if}}

                {{/if}}
            </div>

        {{else}}
        
            <div class="container text-center">
              <div class="details">
                  <div class="panel panel-danger">
                    <div class="panel-heading">
                      <h3 class="panel-title">Código Inválido</h3>
                    </div>
                    <div class="panel-body">
                      Producto ingresado no existe
                    </div>
                  </div>
                  <button class="btn btn-default" {{ action "back"}}>Volver</button>
                </div>
              </div>
            </div>

        {{/if}}
        {{outlet}}
    </script>

    <script type="text/x-handlebars" data-template-name="login">
      <div class="container text-center">
          <h3 class="margin-0-10">Ingrese código de pedido</h3>

          <div class="input-group details">
            {{view Ember.TextField valueBinding="codigo" placeholder="Buscar pedido" class= "form-control"}}
            <span class="input-group-btn">
              <button {{ action insert}} class="btn btn-default" type="button">Buscar</button>
            </span>
          </div>

        <h3 class="margin-20">Mis pedidos</h3>
        <div class="list-group pedidos">
          {{#if saved_orders}}
            {{#each saved_order in saved_orders}}
              {{#link-to 'dispatched_orders.dispatched_order' saved_order.key classNames="list-group-item"}} 
                <button {{action removeLink saved_order.key}} type="button" class="close" data-dismiss="alert">&times;</button>
                {{saved_order.name}}
                {{#if saved_order.delivered}}
                 <span class="badge badge-success">
                  Recibido
                {{else}} 
                  <span class="badge">
                  Traslado
                {{/if}}
                </span>
              {{/link-to}}
            {{/each}}
          {{else}}
            <h4 class="margin-0-10">No está siguiendo ningún pedido</h4>
          {{/if}}
        </div>
      </div>
      {{outlet}} 
    </script>
	
	<script type="text/x-handlebars" data-template-name="ranking">
		<div class="container text-center">		
      <div class="details">	
        <h4 class="alert alert-success margin-0">El despacho ha sido recibido</h4>
        <h3>¿Quieres valorar el servicio?</h3>

        <h3 class="margin-30-0">Ranking</h3>
  			<h2>{{rating max="5"}}</h2>
        <p id="ranking-value" class="margin-0-20">0 puntos (0%)</p>

  			<div class="form-group">
            <textarea placeholder="Añadir Comentario" class="form-control comment-box" rows="7"></textarea>
        </div>
        <p class="form-group-lg-400 text-center">
          <button class="btn btn-primary btn-lg-47" {{ action "vote"}} >Valorar</button>
          <button class="btn btn-default btn-lg-47" {{ action "skip"}} >Saltar</button>
        </p>
      </div>
 		</div>
		{{outlet}} 
	</script>

    <script src="js/libs/jquery-1.10.2.js"></script>
    <script src="bootstrap/js/bootstrap.js"></script>
    <script src="js/libs/handlebars-1.0.0.js"></script>
    <script src="js/libs/ember.js"></script>
    <script src="js/libs/ember-data.js"></script>    
    <script src="js/libs/showdown.js"></script>
    <script src="js/libs/moment.js"></script>
    <script src="js/libs/lawnchair-0.6.1.js"></script>
    <script src="js/libs/lawnchair-query-0.6.1.js"></script>
    <script src="js/libs/lawnchair-callbacks-0.6.1.js"></script>
    <script src="js/libs/lawnchair-pagination-0.6.1.js"></script>
    <script src="js/libs/lawnchair-aggregation-0.6.1.js"></script>
    <script src="js/app.js"></script>
    <script src="js/models/dispatched_order.js"></script>
    <script src="js/controllers/login.js"></script>
    <script src="js/controllers/application.js"></script>
    <script src="js/controllers/ranking.js"></script>
    <script src="js/controllers/dispatched_orders.js"></script>
    <script src="js/views/map.js"></script>
    <script src="js/routes/dispatched_orders.js"></script>
    <script src="js/routes/login.js"></script>
    <script src="js/routes/router.js"></script>
    <script src="js/handlebars/rating_helper.js"></script>
    <script src="js/handlebars/rating.js"></script>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&libraries=geometry"></script>
    

     
  </body>
</html>

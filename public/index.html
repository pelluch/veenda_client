<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8>
        <title>Veenda Client</title>
        <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>

       <!-- titulo -->
    <script type="text/x-handlebars">
        <div class="page-header">
            <div class="container" >
              <a {{ action 'back'}} >
                <img src="veenda_logo_2.png">           
              
             </a>
            </div>
        </div>
        {{outlet}} 
    </script>

    
    <script type="text/x-handlebars" data-template-name="orders/order">

        {{#if destination_latitude }}

            <div class="container text-center">
                {{#if delivered}}
                    <div class="details">
                      <h5 class="btn btn-success btn-xs btn-mg-14-14 btn-lg-50 status status-success">Recibido</h5>
                      <div class="cl"></div>
                      <p><img class="margin-30-0" src="empresa.png"/></p>
                        <h3>#{{ this.id }}</h3>
                        <h4>{{ this.name }}</h4>

                    {{#if comment}}

                      <h3 class="margin-30-0">Ranking</h3>
                      {{rating_helper this}}

                          <div class="panel panel-info">
                            <div class="panel-heading">
                              <h3 class="panel-title">Comentarios</h3>
                            </div>
                            <div class="panel-body">
                              {{comment}}
                            </div>
                          </div>
                    {{/if}}
                    <button class="btn btn-default" {{ action "back"}}>Volver</button>
                     <button class="btn btn-danger" {{ action "reset"}}>Despacho No Recibido</button>
                </div>

                {{else}}
					{{#if dispatch_time}}
						{{#if isMap}}
							<div class="btn-group btn-group-lg-50 margin-15">
								<button type="button" {{ action "mapFalse"}} class="btn btn-default btn-lg-50"><span class="glyphicon glyphicon-list"></span> Detalles</button>
								<button type="button" {{ action "mapTrue"}} class="btn btn-primary btn-lg-50"><span class="glyphicon glyphicon-screenshot"></span> Mapa</button>
							</div>
							<div class="details">
								{{#view App.MapView }}<br/>{{/view}}
								<table class="table table-bordered table-margin-3">
								  <tr>
									<td><img src="gps-icon-spec.png"> Destinatario</td>
									<td><img src="gps-icon-dispatcher-spec.png"> Zona despachador</td>
								  </tr>
								</table>
							</div>
						{{else}}
						<div class="container text-center">
						  <div class="details">
							<h5 class="btn btn-primary btn-xs btn-mg-14-14 btn-lg-50 status status-primary">En Camino</h5>
							<div class="cl"></div>

							<p><img class="margin-30-0" src="empresa.png"/></p>
							<h3>#{{ this.id }}</h3>
							<h4>{{ this.name }}</h4>
							<p>
							  <button class="btn btn-gray btn-lg-47" >
								  <span class="glyphicon glyphicon-time btn-icon"></span>
								  <span class="btn-inline text-left"> 
									<small>
									  <p class="margin-0-0-0">{{this.rest}} pedidos</p>
									  <p class="margin-0-0-0">pendientes</p>
									</small>
								  </span>
							  </button>
							  <button class="btn btn-gray btn-lg-47" {{ action "mapTrue"}} >
								  <span class="glyphicon glyphicon-map-marker btn-icon"></span> 
								  <span class="btn-inline text-left"> 
									<small>
									  <p class="margin-0-0-0">{{this.distance}} cuadras</p>
									  <p class="margin-0-0-0">restantes</p>
									</small>
								  </span>
							  </button>
							</p>
							<button class="btn btn-success btn-group-lg-100_1 btn-lg" {{ action "insert"}} >Llegó mi pedido</button>
						  </div>
						</div>
						{{/if}}
					{{else}}	
						<div class="container text-center">
						  <div class="details">
							<h5 class="btn btn-warning btn-xs btn-mg-14-14 btn-lg-50 status status-warning">Agendado</h5>
							<div class="cl"></div>

							<p><img class="margin-30-0" src="empresa.png"/></p>
							<h3>#{{ this.id }}</h3>
							<h4>{{ this.name }}</h4>
							<h2 class="">Producto no despachado aún</h2>
						  </div>
						</div>
						
						
					{{/if}}
                {{/if}}
            </div>

        {{else}}
        
            <div class="container text-center">
              <div class="details">
                  <div class="panel panel-danger">
                    <div class="panel-heading">
                      <h3 class="panel-title">Código Inválido</h3>
                    </div>
                    <div class="panel-body">
                      Producto ingresado no existe
                    </div>
                  </div>
                  <button class="btn btn-default" {{ action "back"}}>Volver</button>
                </div>
              </div>
            </div>

        {{/if}}
        {{outlet}}
    </script>

    <script type="text/x-handlebars" data-template-name="login">
      <div class="navbar navbar-inverse navbar-fixed-bottom">
       <div class="row">
       <div class="col-xs-9">
        {{view Ember.TextField valueBinding="codigo" placeholder="Seguir nuevo pedido" class= "form-control"}}
        </div>  
        <div class="col-xs-3">
            <button {{ action insert}} class="btn btn-primary btn-border-white btn-lg-300" type="button">Seguir
            </button> 
        </div>        
       </div>             
      </div>
      
      <div class="container text-center">

        <h3 class="margin-20">Mis pedidos</h3>
        <div class="row margin-0-100">
          {{#if saved_orders}}
            {{#each saved_order in saved_orders}}
              <div class="col-md-4">

                <div class="list-items-properties">
                  {{#link-to 'orders.order' saved_order.key}}
                    <button {{action removeLink saved_order.key}} type="button" class="close" data-dismiss="alert">&times;</button>
                    <img class="logo-list" src="empresa.png"/>
                    <h5>Dominos Pizza</h5>
                    <h3 class="margin-0">#{{saved_order.key}}</h3>
                  <div class="btn-group btn-group-lg-100">
                  {{#if saved_order.delivered}}
                    <span  class="btn btn-success btn-fix btn-group-lg-100_1 btn-height status-success">Recibido</span>
                  {{else}} 
            					{{#if saved_order.dispatch_time}}
            						<span  class="btn btn-primary btn-lg-32 btn-fix btn-height status-primary">En Camino</span>
            						<span  class="btn btn-gray btn-lg-32 btn-fix">
            								<span class="glyphicon glyphicon-time btn-icon"></span> 
            								  <span class="btn-inline text-left"> 
            									<small>
            									  <p class="margin-0-0-0">{{saved_order.rest}} pedidos</p>
            									  <p class="margin-0-0-0">pendientes</p>
            									</small>
            								  </span>
            						</span>

            						<span  class="btn btn-default btn-lg-32 btn-fix status-default">
            								<span class="glyphicon glyphicon-map-marker btn-icon"></span> 
            								  <span class="btn-inline text-left"> 
            									<small>
            									  <p class="margin-0-0-0">{{saved_order.distance}} cuadras</p>
            									  <p class="margin-0-0-0">restantes</p>
            									</small>
            								  </span>
            						</span>
            					{{else}} 
            						<span  class="btn btn-warning btn-fix btn-group-lg-100_1 btn-height status-warning">Agendado</span>					
            					{{/if}}
            					
                              {{/if}}
                              </div>
                            </div>
                {{/link-to}}
              </div>
          {{/each}}
          {{else}}
            <h4 class="margin-0-10">No está siguiendo ningún pedido</h4>
          {{/if}}
        </div>
       
      </div>
      {{outlet}} 
    </script>
  
  <script type="text/x-handlebars" data-template-name="rating">
    <div class="container text-center">   
      <div class="details"> 
        <h4 class="alert alert-success margin-0">El despacho ha sido recibido</h4>
        <h3>¿Qué opinas del despacho?</h3>

        <h2>{{rating max="5"}}</h2>

        <div class="form-group">
          <textarea placeholder="Resumen Comentario" class="form-control comment-box margin-0-5" rows="1"></textarea>
            <textarea placeholder="Añadir Comentario" class="form-control comment-box" rows="4"></textarea>
        </div>
        <p>
          <button class="btn btn-primary btn-lg-300" {{ action "vote"}} >Evaluar</button>
        </p>
        <p>
          <button class="btn btn-link btn-lg-300" {{ action "skip"}} >No gracias, no quiero evaluar</button>
        </p>
      </div>
    </div>
    {{outlet}} 
  </script>

    <script src="js/config.js"></script>
    <script src="js/libs/jquery-1.10.2.js"></script>
    <script src="bootstrap/js/bootstrap.js"></script>
    <script src="js/libs/handlebars-1.0.0.js"></script>
    <script src="js/libs/ember.js"></script>
    <script src="js/libs/ember-data.js"></script>    
    <script src="js/libs/showdown.js"></script>
    <script src="js/libs/moment.js"></script>
    <script src="js/libs/lawnchair-0.6.1.js"></script>
    <script src="js/libs/lawnchair-query-0.6.1.js"></script>
    <script src="js/libs/lawnchair-callbacks-0.6.1.js"></script>
    <script src="js/libs/lawnchair-pagination-0.6.1.js"></script>
    <script src="js/libs/lawnchair-aggregation-0.6.1.js"></script>
    <script src="js/app.js"></script>
    <script src="js/models/order.js"></script>
    <script src="js/controllers/login.js"></script>
    <script src="js/controllers/application.js"></script>
    <script src="js/controllers/rating.js"></script>
    <script src="js/controllers/orders.js"></script>
    <script src="js/views/map.js"></script>
    <script src="js/routes/orders.js"></script>
    <script src="js/routes/login.js"></script>
    <script src="js/routes/router.js"></script>
    <script src="js/handlebars/rating_helper.js"></script>
    <script src="js/handlebars/rating.js"></script>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&libraries=geometry"></script>
    

     
  </body>
</html>
